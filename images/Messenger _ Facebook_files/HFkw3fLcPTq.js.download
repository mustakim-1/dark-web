;/*FB_PKG_DELIM*/

__d("LSOptimisticDeleteThread",["LSDeleteThread","LSIssueNewError","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSDeleteThread"),a[0],!1)},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[0]=d[6])})},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=!1:(b=a.item,d[2]=b.errorShouldBeShown)})},function(a){return d[2]===!0?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[6]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[7]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[6],d[7],void 0,void 0)}]):c.resolve()},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("sync_group",d[0]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"delete_thread_v2",c.i64.cast([0,86]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticDeleteThreadStoredProcedure",["LSOptimisticDeleteThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSOptimisticDeleteThread").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql",["MWChatEncryptedBackupsUpsellMessengerInboxQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:!1,kind:"LocalArgument",name:"doesUserHaveAnEB"},c={defaultValue:!1,kind:"LocalArgument",name:"isEBWebOnlyOnboardingEnabled"},d={defaultValue:!1,kind:"LocalArgument",name:"isEBWebPreImprovementsEnabled"},e={alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eb_restore_upsells_dismissed",storageKey:null}]}],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g={alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},f],storageKey:null};return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",selections:[{condition:"doesUserHaveAnEB",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"MWEBRestoreInterstitialDialogWrapper_query"}]},{condition:"isEBWebOnlyOnboardingEnabled",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"MWEBOnboardingInterstitialDialogWrapper_query"}]},{condition:"isEBWebPreImprovementsEnabled",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"useEncryptedBackupsProcessStatePreLoaded_query"}]},{condition:"isEBWebPreImprovementsEnabled",kind:"Condition",passingValue:!1,selections:[{args:null,kind:"FragmentSpread",name:"useEncryptedBackupsProcessStatePreLoadedAndSubscribeForChanges_query"}]},{kind:"RequiredField",field:e,action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",selections:[{condition:"doesUserHaveAnEB",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},f],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},f],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},{condition:"isEBWebOnlyOnboardingEnabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_onboarding_softblocks",plural:!1,selections:[{args:null,documentName:"MWEBOnboardingInterstitialDialogWrapper_query",fragmentName:"MWEBOnboardingVariantInterstitialDialogChooser_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eb_onboarding_upsells_dismissed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eb_onboarding_softblocks_dismissed",storageKey:null}]}],storageKey:null}]},{condition:"isEBWebPreImprovementsEnabled",kind:"Condition",passingValue:!0,selections:[g,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null}]},{condition:"isEBWebPreImprovementsEnabled",kind:"Condition",passingValue:!1,selections:[g]},e]},params:{id:b("MWChatEncryptedBackupsUpsellMessengerInboxQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWXDialogPageLoadingState.react",["cr:6995","cr:9910","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.onClose;if(b("cr:9910")!=null){var d;return i.jsx(b("cr:9910"),{onClose:(d=a)!=null?d:c("emptyFunction")})}return b("cr:6995")!=null?i.jsx(b("cr:6995"),{onClose:a}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsUpsellMessengerInbox.react",["BaseModal.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRelay","InteractionTracing.xplat","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql","MWEBUpsellDismissedEnum.facebook","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWXDialogPageLoadingState.react","MWXMultiStepDialog.react","ReQL","ReQLSuspense","cr:4118","cr:4339","cr:8727","promiseDone","qex","react","useHasRestoreInterstitialSoftblockBeenDismissed","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useEffect,n=e.useMemo,o=e.useRef,p=e.useState,q=b("cr:8727")!=null;function r(a){c("promiseDone")(d("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:a,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED}))}function s(a){var b=a.onDismiss;m(function(){c("InteractionTracing.xplat").getPendingInteractions().forEach(function(a){a.addAnnotationBoolean("eb_loading_dialog_shown",!0)})},[]);return k.jsx(c("MWXMultiStepDialog.react"),{onClose:function(){d("MWChatEncryptedBackupsLogging").closeDialogCancelFlow({event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,onClose:b})},withCloseButton:!0,children:function(a){return k.jsx(c("MWXDialogPageLoadingState.react"),{})}})}s.displayName=s.name+" [from "+f.id+"]";function a(a){a=a.mWChatEncryptedBackupsRestoreUpsellMessengerInboxQueryReference;var e=d("CometRelay").usePreloadedQuery(h!==void 0?h:h=b("MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql"),a),g=o(!1),j=l(function(a){g.current=a},[]),m=(i||(i=c("useReStore")))(),t=b("cr:4118")({query:e}),u=(a=d("ReQLSuspense").useFirst(function(){return q&&t===2?d("ReQL").fromTableAscending(m.tables.experiences_shared_state).getKeyRange(c("MWEncryptedBackupsLocalStorageEntryEnum").EB_ONBOARDING_DEFER_UPSELL_UNTIL_TIME).map(function(a){a=a.stateValue;var b=Date.now()/1e3;return b<+a?!0:!1}):d("ReQL").empty()},[t,m],f.id+":116"))!=null?a:!1,v=c("useHasRestoreInterstitialSoftblockBeenDismissed")({backupState:t});a=p(e.viewer.is_eb_restore_upsells_dismissed===d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.ALL_DISMISSED);var w=a[0],x=a[1];return n(function(){if(w)return null;if(t===4||g.current===!0){var a=d("MWEBUseLocalStorage").mwEBGetIsLocalStorageEntryValuePresent(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_TURN_OFF_SECURE_STORAGE);return!c("qex")._("741")||b("cr:4339")==null||a||v?null:k.jsx(c("BaseModal.react"),{blockKeyCommands:!0,stackingBehavior:"above-everything",children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWEBRestoreInterstitialDialogWrapper",children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(s,{onDismiss:function(){x(!0),r(m)}}),children:k.jsx(b("cr:4339"),{query:e,setIsClosed:x,setIsDialogPersisted:j,setIsDismissed:function(){return r(m)}})})})})}else if(b("cr:8727")&&t===2&&u===!1)return k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(b("cr:8727"),{onClose:function(){return x(!0)},query:e})});return null},[w,t,u,v,e,j,m])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsUpsellMessengerInboxWithEBCheckWrapper.react",["cr:6085"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:6085")}),98);
__d("MWEBRestoreInterstitialDialogWrapperDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWEBRestoreInterstitialDialogWrapper.react").__setRef("MWEBRestoreInterstitialDialogWrapperDeferred.react"));function a(a){return i.jsx(j,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxInfoNotifications.react",["fbt","GroupsCometChatsThreadNotificationSettingsDialog.entrypoint","JSResourceForInteraction","MWCMIsAnyCMThread","MessengerMuteUtils","react","useMWChatUnmuteThread","useMWPIsThreadMuted","useMWXEntryPointDialog","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i||(i=d("react"));var j=i.useRef,k=c("JSResourceForInteraction")("LSMuteThreadDialog.react").__setRef("MWInboxInfoNotifications.react");function a(a){var b=a.children,e=a.entryPoint,f=a.folder,g=a.thread;a=d("MessengerMuteUtils").calcMuteUntilMs(g);var i=c("useMWPIsThreadMuted")(g),l=c("useMWChatUnmuteThread")(),m=j(null),n=c("MWCMIsAnyCMThread")(g.threadType)&&f!=null,o=n?h._("__JHASH__v2htBYyRmgj__JHASH__"):i?h._("__JHASH__EEpVvOonNtN__JHASH__"):h._("__JHASH__YEwrQy1FdlS__JHASH__");a=i?d("MessengerMuteUtils").mutedUntilLabel(a===-1?a:a/1e3):void 0;var p=c("useMWXEntryPointDialog")(c("GroupsCometChatsThreadNotificationSettingsDialog.entrypoint"),{}),q=p[0];p=function(){return q({groupId:f==null?void 0:f.fbGroupId,threadKey:g.threadKey})};var r=c("useMWXLazyDialog")(k),s=r[0];r=function(){return s({entryPoint:e,threadKey:g.threadKey})};var t=n?p:r;return b(function(){return i&&!n?l(g):t()},m,o,a,i)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MessageRequestsBulkActionsButtons.react",["fbt","FocusRegion.react","I64","LSFactory","LSOptimisticDeleteThreadStoredProcedure","LSOptimisticMarkThreadReadV2StoredProcedure","MessageRequestsBulkActionsContext.react","MessageRequestsLog","ServerTime","TetraButtonGroup.react","emptyFunction","focusScopeQueries","promiseDone","react","stylex","useMWXConfirmationDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=k||(k=d("react"));b=k;var n=b.useCallback,o=b.useContext,p={bulkActionsButtons:{paddingBottom:"xsag5q8",$$css:!0},bulkActionsButtonsHidden:{display:"x1s85apg",$$css:!0}};function q(a){return n(function(b){b.forEach(function(b){var e=(l||(l=d("I64"))).of_string(b);c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticMarkThreadReadV2StoredProcedure")(c("LSFactory")(a),{readWatermarkTimestampMs:(l||(l=d("I64"))).of_float(d("ServerTime").getMillis()),threadKey:e})},"readwrite",void 0,void 0,f.id+":52"))})},[a])}function r(a){return n(function(b){b.forEach(function(b){var e=(l||(l=d("I64"))).of_string(b);c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticDeleteThreadStoredProcedure")(c("LSFactory")(a),{threadKey:e})},"readwrite",void 0,void 0,f.id+":73"))})},[a])}function a(a){a=a.entryPoint;var b=a===void 0?"messageRequests":a;a=o(c("MessageRequestsBulkActionsContext.react"));var e=a.bulkActionsSelectedThreads,f=a.bulkActionsUnreadSelectedThreads,g=a.isBulkActionsEditMode,k=a.setIsBulkActionsEditMode;a=(i||(i=c("useReStore")))();var l=q(a),n=r(a),s=c("useMWXConfirmationDialog")();a=function(){l(e);k(!1);return d("MessageRequestsLog").logMessageRequestsBulkActionTapped(0,e.size,f.size,5,b==="spam"?-3:-1)};var t=function(){d("MessageRequestsLog").logMessageRequestsBulkActionTapped(0,e.size,f.size,4,b==="spam"?-3:-1);return s({body:e.size===1?h._("__JHASH__MLd3xbTafSI__JHASH__"):h._("__JHASH__sZbvz5cEYff__JHASH__"),confirm:h._("__JHASH__pKnL1Kcyxnh__JHASH__"),title:e.size===1?h._("__JHASH__zdCU4WfWx_J__JHASH__"):h._("__JHASH__6Kbu-lnpMhp__JHASH__",[h._param("Number of selected threads",String(e.size))])},function(){n(e);k(!1);d("FocusRegion.react").focusRegionById("mwb-jewel-bulk-actions-edit-button",d("focusScopeQueries").tabbableScopeQuery);return d("MessageRequestsLog").logMessageRequestsBulkActionConfirmed(0,e.size,f.size,4,b==="spam"?-3:-1)},c("emptyFunction"))};return m.jsx("div",{className:(j||(j=c("stylex")))(g?p.bulkActionsButtons:p.bulkActionsButtonsHidden),id:b==="spam"?"spam-bulk-actions-buttons":"message-requests-bulk-actions-buttons",children:m.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,children:m.jsx(c("TetraButtonGroup.react"),{align:"justify",direction:"forward",primary:{disabled:e.size===0||f.size===0,label:h._("__JHASH__pC0i0CAW1ov__JHASH__").toString(),onPress:a,testid:b==="spam"?"spam-bulk-mark-as-read-button":"message-requests-bulk-mark-as-read-button",type:"secondary"},secondary:{disabled:e.size===0,label:h._("__JHASH__pKnL1Kcyxnh__JHASH__"),onPress:t,testid:b==="spam"?"spam-bulk-delete-button":"message-requests-bulk-delete-button"}})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);