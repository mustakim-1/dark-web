;/*FB_PKG_DELIM*/

__d("LSInsertAnonymousTaskContext",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(311).add({taskId:a[0],projectName:a[1]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatch",["LSInsertAnonymousTaskContext","LSIssueNewTaskUsingSyncChannel","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("message_id",a[0]),d[0].set("content_ref",a[1]),d[1]=d[0].get("message_id"),d[0],d[4]=["LSMailboxAnonymizedMsgrWebE2EEXmaReceiverFetchSyncAction",".",d[1]].join(""),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskUsingSyncChannel"),d[4],c.i64.cast([0,1006]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,2]),!1,c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[3])},function(a){return c.storedProcedure(b("LSInsertAnonymousTaskContext"),d[3],"LS_MsgrXmaReceiverFetch")}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatchStoredProcedure",["LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatch","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.messageId;d[1]=b.contentRef;return c("LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatch").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LsBotComposerQuickReplyTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743837");b=d("FalcoLoggerInternal").create("ls_bot_composer_quick_reply_tapped",a);e=b;g["default"]=e}),98);
__d("LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743846");b=d("FalcoLoggerInternal").create("ls_business_welcome_page_get_started_button_tapped",a);e=b;g["default"]=e}),98);
__d("MAWFilePressable.react",["fbt","CometErrorBoundary.react","FBLogger","I64","MAWAttachmentBlob.react","MWChatMessageId","MWFileViewerLogger","MWXPressable.react","formatFileSize","goUriOnNewWindow","react","useMWFileOnPress"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useCallback,m=b.useEffect,n={filePressable:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},o=h._("__JHASH__uiTAWyhPCWI__JHASH__");function p(a){return a.filesize==null?null:c("formatFileSize")((j||(j=d("I64"))).to_int32(a.filesize))}function q(a){var b=a.children,d=a.linkProps,e=a.onPress;a=a.testid;return k.jsx(c("MWXPressable.react"),{display:"inline",linkProps:d,onPress:e,overlayDisabled:!0,testid:void 0,xstyle:n.filePressable,children:b})}q.displayName=q.name+" [from "+f.id+"]";function r(a){var b=a.attachmentID,e=a.children,f=a.entrypoint,g=a.linkProps,h=a.messageID,i=a.onPress;a=a.testid;a=c("useMWFileOnPress")(h,b,i,f,d("MWFileViewerLogger").generateSessionId());return k.jsx(q,{linkProps:g,onPress:a,testid:void 0,children:e})}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=a.children,e=a.entrypoint,f=a.file,g=a.getFileUrl,h=a.mediaRenderQpl,i=a.onPress,n=a.renderUnsupportedAttachment;a=a.testid;a=((a=f.filename)!=null?a:o).toString();var s=g!=null?g(f,"MAWFilePressable",h):d("MAWAttachmentBlob.react").getAttachmentBlob(f,"MAWFilePressable",h);g=d("MWChatMessageId").makeSent((j||(j=d("I64"))).to_string(f.threadKey),f.messageId,j.to_string(f.timestampMs));var t={download:a,target:"_blank",url:s},u=p(f),v=l(function(a,b){c("FBLogger")("messenger_web_media","cannot_load_entry_point").mustfix(a.message||"Cannot open file viewer in "+b),s!=null&&c("goUriOnNewWindow")(s)},[s]);m(function(){s!=null&&s.length>0?h==null?void 0:h.endSuccess():h==null?void 0:h.endFail("load-file-error")},[h,s]);if((s==null||s.length===0)&&n!=null)return n(f);return g.type==="sent"?k.jsx(c("CometErrorBoundary.react"),{onError:v,children:k.jsx(r,{attachmentID:f.attachmentFbid,entrypoint:e,linkProps:t,messageID:g.value,onPress:i,testid:void 0,children:b({filename:a,messageID:g,size:u})})}):k.jsx(q,{linkProps:t,onPress:i,testid:void 0,children:b({filename:a,messageID:g,size:u})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MAWChatFile.react",["MAWFilePressable.react","MWChatFilePreview.react","MWInboxInfoSharedContentQPLLogger","MWXTextPairing.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={root:{alignItems:"x6s0dn4",display:"x78zum5",userSelect:"x87ps6o",$$css:!0}};function l(){d("MWInboxInfoSharedContentQPLLogger").logOpenSharedContentFromThread("files")}function a(a){var b=a.file,d=a.getFileUrl,e=a.mediaRenderQpl;a=a.renderUnsupportedAttachment;return j.jsx(c("MAWFilePressable.react"),{entrypoint:"chat_file_v4",file:b,getFileUrl:d,mediaRenderQpl:e,onPress:l,renderUnsupportedAttachment:a,testid:void 0,children:function(a){var d=a.filename;a=a.size;return j.jsxs("div",{className:(h||(h=c("stylex")))(k.root,!1),children:[j.jsx(c("MWChatFilePreview.react"),{attachment:b,withPreview:!1}),j.jsxs("div",{className:"xzsf02u x1iyjqo2 x1s688f xz9dl7a xn6708d xsag5q8 x1ye3gou x13faqbe",children:[j.jsx(c("MWXTextPairing.react"),{headline:d,headlineLineLimit:3,level:4}),j.jsx("div",{className:"x889kno",children:j.jsx(c("MWXTextPairing.react"),{body:a,bodyColor:"secondary",bodyLineLimit:1,level:4})})]})]})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMessageIntegrityCheckDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWMessageIntegrityCheck").__setRef("MAWMessageIntegrityCheckDeferred");function a(a,b,c,d,e,g,i,j){h.onReady(function(h){return h.runMessageIntegrityCheck(a,b,c,d,e,g,i,j)})}g.runMessageIntegrityCheckDeferred=a}),98);
__d("MWV2AttachmentErrorPlaceholder.react",["fbt","CometObjectFitContainer.react","MWPStableImage.react","MWXIconCautionTriangle","MWXIconStrict.react","MWXMessageBubbleCornerStyles.react","MWXTooltip.react","react","stylex","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={content:{alignItems:"x6s0dn4",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",width:"xh8yej3",$$css:!0},dark:{backgroundColor:"xhzw6zf",$$css:!0},light:{backgroundColor:"x1vtvx1t",$$css:!0}};function a(a){var b=a.connectBottom,e=a.connectTop,f=a.hasAppAttribution,g=a.height,j=a.outgoing,m=a.width;a=a.xstyle;var n=c("useCurrentDisplayMode")();g=(g=g)!=null?g:100;m=(m=m)!=null?m:200;var o=m/g;j=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:j===!0?"right":"left",connectBottom:b,connectTop:e,flatten:f===!0?"bottom":"none"});return k.jsx(c("MWXTooltip.react"),{tooltip:h._("__JHASH__k6bhcm2tjqK__JHASH__"),children:k.jsx(d("MWPStableImage.react").MWPStableImageContainer,{aspectRatio:o,className:(i||(i=c("stylex")))(!1),height:g,maxHeight:200,maxWidth:480,width:m,children:k.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:o,objectFitMode:"CONTAINER_WIDTH_BASED_ASPECT_RATIO",children:k.jsx("div",{className:i([l.content,n==="dark"?l.dark:l.light,j,a]),"data-testid":void 0,children:k.jsx(c("MWXIconStrict.react"),{color:"primary",icon:c("MWXIconCautionTriangle"),size:20})})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2AttachmentLoadingPlaceholder.react",["CometObjectFitContainer.react","MWPStableImage.react","MWXGlimmer.react","MWXMessageBubbleCornerStyles.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={glimmer:{display:"x1lliihq",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function a(a){var b=a.connectBottom,e=a.connectTop,f=a.hasAppAttribution,g=a.height,i=a.maxHeight,l=a.maxWidth,m=a.outgoing,n=a.width;a=a.xstyle;if(n==null)return null;if(g==null)return null;var o=n/g;m=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:m===!0?"right":"left",connectBottom:b,connectTop:e,flatten:f===!0?"bottom":"none"});return j.jsx("div",{"data-testid":void 0,children:j.jsx(d("MWPStableImage.react").MWPStableImageContainer,{aspectRatio:o,className:(h||(h=c("stylex")))(!1),height:g,maxHeight:(b=i)!=null?b:200,maxWidth:(e=l)!=null?e:480,width:n,children:j.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:o,objectFitMode:"CONTAINER_WIDTH_BASED_ASPECT_RATIO",children:j.jsx(c("MWXGlimmer.react"),{index:1,xstyle:[k.glimmer,m,a]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureAudioAttachmentContent.react",["CometPlaceholder.react","MWAudioPlayer.react","MWPAudioPlayerUtils","MWPMessageIsReply","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,e=a.connectTop,f=a.dbAttachment,g=a.getPlayableUrl,h=a.mediaRenderQpl,j=a.message,k=a.outgoing,l=d("MWPAudioPlayerUtils").useCalculatePlayerWidth(),m=d("MWPAudioPlayerUtils").useCalculatePlayerHeight(d("MWPAudioPlayerUtils").UseCase.PLAYER);if(c("gkx")("1445")&&f.hasMedia===!1){h==null?void 0:h.addPoint("loading_has_media_false");return i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:e,height:m,outgoing:k,width:l})}return c("gkx")("1445")?i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:e,height:m,outgoing:k,width:l}),children:i.jsx(d("MWAudioPlayer.react").MWAudioPlayer,{attachment:f,connectBottom:b,connectTop:e,getPlayableUrl:g,isReply:c("MWPMessageIsReply")(j),mediaRenderQpl:h,message:j,outgoing:k,renderUnsupportedAttachment:function(){return i.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:e,height:m,outgoing:k,width:l})}})}):i.jsx(d("MWAudioPlayer.react").MWAudioPlayer,{attachment:f,connectBottom:b,connectTop:e,getPlayableUrl:g,isReply:c("MWPMessageIsReply")(j),mediaRenderQpl:h,message:j,outgoing:k})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureFileAttachmentContent.react",["CometPlaceholder.react","MAWChatFile.react","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MWXMessageBubble.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=60,k=250,l={bubble:{paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0}};function a(a){var b=a.connectBottom,d=a.connectTop,e=a.dbAttachment,f=a.getFileUrl,g=a.mediaRenderQpl,h=a.outgoing;if(c("gkx")("1445")&&e.hasMedia===!1){g==null?void 0:g.addPoint("loading_has_media_false");return i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,height:j,outgoing:h,width:k})}return c("gkx")("1445")?i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,height:j,outgoing:h,width:k}),children:i.jsx(c("MWXMessageBubble.react"),{align:h?"right":"left",color:"incoming",connectBottom:b,connectTop:d,xstyle:l.bubble,children:i.jsx(c("MAWChatFile.react"),{file:e,getFileUrl:f,mediaRenderQpl:g,renderUnsupportedAttachment:function(){return i.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:d,height:j,outgoing:h,width:k})}})})}):i.jsx(c("MWXMessageBubble.react"),{align:h?"right":"left",color:"incoming",connectBottom:b,connectTop:d,xstyle:l.bubble,children:i.jsx(c("MAWChatFile.react"),{file:e,mediaRenderQpl:g})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureImageAttachmentContent.react",["CometPlaceholder.react","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MWV2ChatImage.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,d=a.connectTop,e=a.dbAttachment,f=a.getPlayableUrl,g=a.getPreviewUrl,h=a.mediaRenderQpl,j=a.message,k=a.outgoing,l=a.previewHeight,m=a.previewWidth;if(c("gkx")("1445")&&e.hasMedia===!1){h==null?void 0:h.addPoint("loading_has_media_false");return i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:l,outgoing:k,width:m})}return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:l,outgoing:k,width:m}),children:i.jsx(c("MWV2ChatImage.react"),{attachment:e,connectBottom:b,connectTop:d,getPlayableUrl:f,getPreviewUrl:g,isSecureThread:!0,mediaRenderQpl:h,message:j,navigateToRouteForMediaViewer:!1,outgoing:k,renderUnsupportedAttachment:c("gkx")("1445")?function(){return i.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:l,outgoing:k,width:m})}:void 0})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureStickerAttachmentContent.react",["CometPlaceholder.react","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MWV2Sticker.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,d=a.connectTop,e=a.dbAttachment,f=a.getPreviewUrl,g=a.mediaRenderQpl,h=a.outgoing,j=a.previewHeight,k=a.previewWidth;if(c("gkx")("1445")&&e.hasMedia===!1){g==null?void 0:g.addPoint("loading_has_media_false");return i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:j,outgoing:h,width:k})}return c("gkx")("1445")?i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:j,outgoing:h,width:k}),children:i.jsx(c("MWV2Sticker.react"),{attachment:e,getPreviewUrl:f,mediaRenderQpl:g,renderUnsupportedAttachment:function(){return i.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:d,hasAppAttribution:e.attributionAppName!=null,height:j,outgoing:h,width:k})}})}):i.jsx(c("MWV2Sticker.react"),{attachment:e,getPreviewUrl:f,mediaRenderQpl:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureVideoAttachmentContent.react",["CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MWV2ChatVideo.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=a.connectBottom,e=a.connectTop,f=a.dbAttachment,g=a.getPreviewUrl,h=a.mediaRenderQpl,l=a.message,m=a.outgoing,n=a.previewHeight,o=a.previewWidth;if(c("gkx")("1445")&&f.hasMedia===!1){h==null?void 0:h.addPoint("loading_has_media_false");return k.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:e,hasAppAttribution:f.attributionAppName!=null,height:n,outgoing:m,width:o})}return k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:b,connectTop:e,hasAppAttribution:f.attributionAppName!=null,height:n,outgoing:m,width:o}),children:k.jsx(c("MWV2ChatVideo.react"),{attachment:f,autoPlaySetting:(i||(i=d("I64"))).le(l.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))?"off":void 0,connectTop:e,getPreviewUrl:g,mediaRenderQpl:h,message:l,navigateToRouteForMediaViewer:!1,outgoing:m,renderUnsupportedAttachment:c("gkx")("1445")?function(){return k.jsx(c("MWV2AttachmentErrorPlaceholder.react"),{connectBottom:b,connectTop:e,hasAppAttribution:f.attributionAppName!=null,height:n,outgoing:m,width:o})}:void 0})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureXMAAttachmentContent.react",["LSMediaUrlAttachment","MAWAttachmentBlob.react","MWXMAAttachment.react","isReceiverFetchReceivingEnabled","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,e=a.connectTop,f=a.dbAttachment,g=a.hasText,h=a.mediaRenderQpl;a=a.outgoing;return i.jsx(d("MWXMAAttachment.react").MWXMAAttachment,{attachment:f,connectBottom:b,connectTop:e,getFaviconUrlXMA:function(a,b){return a.faviconUrl!=null&&c("isReceiverFetchReceivingEnabled")()?d("LSMediaUrlAttachment").faviconUrl(a):d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"favicon","MAWSecureXMAAttachmentContent - getFaviconUrlXMA",h)},getHeaderUrlXMA:function(a){return a.headerImageUrl!=null&&c("isReceiverFetchReceivingEnabled")()?d("LSMediaUrlAttachment").headerImageUrl(a):d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"header","MAWSecureXMAAttachmentContent - getHeaderUrlXMA",h)},getPlayableUrl:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview","MAWSecureXMAAttachmentContent - getPlayableUrl",h)},getPreviewUrlXMA:function(a,b){return a.previewUrl!=null&&c("isReceiverFetchReceivingEnabled")()?d("LSMediaUrlAttachment").previewUrl(a):d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview","MAWSecureXMAAttachmentContent - getPreviewUrlXMA",h)},hasText:g,mediaRenderQpl:h,outgoing:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useXMAPreviewsDisabledSetting",["MWPActor.react","MessengerWebPrivacySettings","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWPActor.react").useActor(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.tables.messaging_privacy_settings).getKeyRange(b)},[a,b],f.id+":26");return e==null?c("MessengerWebPrivacySettings").e2ee_xma_previews_disabled:(e=e==null?void 0:e.e2eeXmaPreviewsDisabled)!=null?e:!1}g["default"]=a}),98);
__d("useIssueReceiverFetchTask",["FBLogger","Int64Hooks","LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatchStoredProcedure","LSFactory","LSIntEnum","LSXmaContentType","MAWReceiverFetchQPLLogger","Promise","promiseDone","react","useAsyncReStore","useXMAPreviewsDisabledSetting"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useRef;function l(a,e,g){if(g==null)return(h||(h=b("Promise"))).resolve();d("MAWReceiverFetchQPLLogger").logFetchStart(e);return a.runInTransaction(function(a){return c("LSAnonymizedMsgrWebE2EEXmaReceiverFetchDispatchStoredProcedure")(c("LSFactory")(a),{contentRef:g,messageId:e})},"readwrite",void 0,void 0,f.id+":36")}function a(a,b,e){var f=c("useAsyncReStore")(),g=c("useXMAPreviewsDisabledSetting")(),h=k(!1);d("Int64Hooks").useEffectInt64(function(){if(e==null||(i||(i=d("LSIntEnum"))).toNumber(e)!==c("LSXmaContentType").MSG_RECEIVER_FETCH||g||h.current)return;h.current=!0;c("promiseDone")(f,function(c){return l(c,a,b)},function(a){return c("FBLogger")("messenger_web_sharing").catching(a).warn("Failed to issue receiver fetch task on mount")})},[f,a,b,g,e])}g["default"]=a}),98);
__d("MAWSecureAttachment.react",["I64","LSAuthorityLevel","LSIntEnum","MAWAttachmentBlob.react","MAWGetAttachmentThumbnailBlob","MAWSecureAudioAttachmentContent.react","MAWSecureFileAttachmentContent.react","MAWSecureImageAttachmentContent.react","MAWSecureStickerAttachmentContent.react","MAWSecureVideoAttachmentContent.react","MAWSecureXMAAttachmentContent.react","MWChatBubbleEmphasisRing.react","MWPMessageListAttachmentContainer.react","MWV2AttachmentLoadingPlaceholder.react","MessagingAttachmentType","ReQL","ReQLSuspense","react","useIssueReceiverFetchTask","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));b=i;var m=b.useEffect,n=b.useMemo;function o(a){var b=a.dbAttachment,e=a.connectBottom,f=a.connectTop,g=a.hasText,h=a.mediaRenderQpl,i=a.message;a=a.outgoing;var m=b.attachmentFbid,n=b.attachmentType,o=b.authorityLevel,p=b.previewHeight!=null?(j||(j=d("I64"))).to_float(b.previewHeight):b.previewHeightLarge!=null?(j||(j=d("I64"))).to_float(b.previewHeightLarge):void 0,q=b.previewWidth!=null?(j||(j=d("I64"))).to_float(b.previewWidth):b.previewWidthLarge!=null?(j||(j=d("I64"))).to_float(b.previewWidthLarge):void 0;switch(!0){case m===(j||(j=d("I64"))).to_string((j||(j=d("I64"))).max_int)&&(j||(j=d("I64"))).equal(o,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)):h==null?void 0:h.addPoint("loading_eb_frontloading");return l.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:e,connectTop:f,hasAppAttribution:b.attributionAppName!=null,height:p,outgoing:a,width:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):return l.jsx(c("MAWSecureImageAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:c("MAWGetAttachmentThumbnailBlob"),mediaRenderQpl:h,message:i,outgoing:a,previewHeight:p,previewWidth:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):return l.jsx(c("MAWSecureVideoAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,message:i,outgoing:a,previewHeight:p,previewWidth:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)):return l.jsx(c("MAWSecureAudioAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,message:i,outgoing:a});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)):return l.jsx(c("MAWSecureImageAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,message:i,outgoing:a,previewHeight:p,previewWidth:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)):return l.jsx(c("MAWSecureStickerAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,outgoing:a,previewHeight:p,previewWidth:q});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)):return l.jsx(c("MAWSecureXMAAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,hasText:g,mediaRenderQpl:h,outgoing:a});case(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)):return l.jsx(c("MAWSecureFileAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,getFileUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:h,outgoing:a});default:return"Unsupported attachment type"}}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=a.connectBottom,e=a.connectTop,g=a.hasEmphasisRing,i=a.hasText,p=a.mediaRenderQpl,q=a.message,r=a.outgoing,s=(h||(h=c("useReStore")))();a=q.authorityLevel;var t=q.messageId,u=q.threadKey,v=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(s.tables.attachments).getKeyRange(u,t)},[s,t,u,a],f.id+":215");c("useIssueReceiverFetchTask")(q.messageId,q.xmaReceiverFetchParams,v==null?void 0:v.xmaContentType);a=n(function(){return g===!0?function(a,b){return l.jsx(c("MWChatBubbleEmphasisRing.react"),{connectBottom:!1,connectTop:e,hasXMA:a,outgoing:r,precedesXMA:!1,children:b})}:void 0},[e,g,r]);m(function(){p==null?void 0:p.addAttachmentAnnotations(v)},[p,v]);return v==null?null:l.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:e,message:q,paint:(j||(j=d("I64"))).equal(v.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))?!1:void 0,renderEmphasisRing:a,children:l.jsx(o,{connectBottom:b,connectTop:e,dbAttachment:v,hasText:i,mediaRenderQpl:p,message:q,outgoing:r})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWUnavailablePlaceholder.react",["fbt","MWV2TombstonedMessage.react","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:c("gkx")("2161")?h._("__JHASH__bLtIFgZUFni__JHASH__"):h._("__JHASH__M9fzIhDqITQ__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MAWUnavailableStoryPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__pGZ-I0iz-G0__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MAWSecurePlaceholderTombstone.react",["MAWUnavailablePlaceholder.react","MAWUnavailableStoryPlaceholder.react","ReQL","ReQLSuspense","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.attachments).getKeyRange(a.threadKey,a.messageId)},[b,a.threadKey,a.messageId],f.id+":25")}function a(a){a=a.message;a=a;a=k(a);if(a==null)return null;a=a.defaultCtaType;if(a==="xma_montage_share")return j.jsx(c("MAWUnavailableStoryPlaceholder.react"),{});c("recoverableViolation")("Unexpected case where message is tombstone type but the attachment is not xma montage share","messenger_web_sharing");return j.jsx(c("MAWUnavailablePlaceholder.react"),{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecurePlaceholder.react",["I64","LSIntEnum","MAWLocalizationType","MAWSecurePlaceholderTombstone.react","MAWUnavailablePlaceholder.react","MWPMessageListColumn.react","MWV2TombstonedMessage.react","getMAWLocalizedFallbackMsgSnippet","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function l(a){var b=a.actorId;a=a.message;var e=a.displayedContentTypes,f=a.senderId;f=(i||(i=d("I64"))).equal(f,b);if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(65536)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(131072)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(524288)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(1048576)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(2097152)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(4194304)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(8388608)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(16777216)))return k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(f?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE)});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(262144)))return k.jsx(c("MAWUnavailablePlaceholder.react"),{});if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(256)))return k.jsx(c("MAWSecurePlaceholderTombstone.react"),{message:a});return(i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(33554432))?k.jsx(c("MWV2TombstonedMessage.react"),{children:c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE)}):null}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.actorId;a=a.message;return k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[k.jsx("div",{className:"x1eb86dx x36qwtl xh8yej3"}),k.jsx(l,{actorId:b,message:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMediaRenderQpl",["I64","LSAuthorityLevel","LSIntEnum","MAWMsg","MWMediaRenderQplUtils","MWPActor.react","QPLUserFlow","Random","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect,l=b.useMemo,m=b.useRef;function a(a,b){var e=m(),f=m(),g=(i||(i=d("I64"))).le(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)),h=d("MWPActor.react").useActor(),p=i.equal(a.senderId,h);k(function(){return function(){e.current!=null&&f.current!==e.current&&c("QPLUserFlow").endCancel(d("MWMediaRenderQplUtils").event,{instanceKey:e.current})}},[]);h=l(function(){if(!n(a))return null;var h=o();e.current=h;c("QPLUserFlow").start(d("MWMediaRenderQplUtils").event,{annotations:{bool:{is_optimistic:g,is_outgoing:p},string:{content_type:d("MWMediaRenderQplUtils").getMessageContentTypeString(a),entry_point:"thread_view",thread_type:d("MWMediaRenderQplUtils").getThreadTypeString(b),transport_key:a.transportKey}},cancelOnUnload:!0,instanceKey:h,timeoutInMs:d("MWMediaRenderQplUtils").QPL_TIMEOUT});return babelHelpers["extends"]({},d("MWMediaRenderQplUtils").createQplFlowCommon(d("MWMediaRenderQplUtils").event,h,f),{addAttachmentAnnotations:function(a){c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").event,{bool:{has_db_attachment:a!=null},string:{attachment_type:a==null?null:d("MWMediaRenderQplUtils").getAttachmentTypeString(a)}},{instanceKey:h}),(a==null?void 0:a.xmaContentType)!=null&&c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").event,{string:{xma_content_type:d("MWMediaRenderQplUtils").getXmaContentTypeStringFromEnum(a.xmaContentType)}},{instanceKey:h})}})},[g]);return h}function n(a){return d("MAWMsg").isXMAMsg(a)||d("MAWMsg").isMediaMsg(a)}function o(){return Date.now()+Math.round(d("Random").random()*1e4)}g["default"]=a}),98);
__d("MAWSecureAttachmentRenderer.react",["CometPlaceholder.react","MAWMsg","MAWSecureAttachment.react","MAWSecurePlaceholder.react","MWPActor.react","MWPMessageParsingUtils","react","useMediaRenderQpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function k(a,b,e,f,g,h,j,k){b=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectTop(a,b,"below");e=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectBottom(a,e,"below");return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:d("MAWMsg").isMediaMsg(a)||d("MAWMsg").isXMAMsg(a)?i.jsx(c("MAWSecureAttachment.react"),{connectBottom:e,connectTop:b,hasEmphasisRing:k,hasText:h,mediaRenderQpl:g,message:a,outgoing:f}):i.jsx(c("MAWSecurePlaceholder.react"),{actorId:j,message:a})})}k.displayName=k.name+" [from "+f.id+"]";function a(a,b,e){var f=d("MWPActor.react").useActor(),g=c("useMediaRenderQpl")(a,b);a=j(function(a,b,c,d,h){return k(a,b,c,d,g,h,f,e)},[f,e,g]);return a}g.render=k;g.useRenderAttachmentWithQpl=a}),98);
__d("MAWMessageListRow.react",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWSecureAttachmentRenderer.react","MWMessageRow.react","MWPVisibleMessageContext.react","MWV2MessageActionsVisibility.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.domElementRef,c=a.lastEbMessageTime,e=a.modal,f=a.row,g=a.thread;a=d("MWV2MessageActionsVisibility.react").useStopHoveringRef();var h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType),k=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();k=k.visibleMessage;var l=f.message;h=h?(i||(i=d("I64"))).equal(g.threadKey,l.threadKey):!1;var m=!1;if(k!=null){var n=k.messageId;switch(k.source){case"Reply":case"Pinned":m=n===l.messageId;break;default:m=!1}}k=d("MAWSecureAttachmentRenderer.react").useRenderAttachmentWithQpl(l,g,m);n={containerThreadKey:g.threadKey,domElementRef:b,hasMessageEmphasisRing:m,isModal:e===l.messageId,isSecureMessage:h,lastEbMessageTime:c,message:l,nextMessage:f.nextMessage,prevMessage:f.prevMessage,renderAttachment:k,stopHoveringRef:a,threadType:d("Int64Hooks").useMemoInt64(function(){return g.threadType},[g.threadType])};return j.jsx(d("MWMessageRow.react").MWMessageRow,babelHelpers["extends"]({},n))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPOneToOneThreadBlockedContext.react",["I64","Int64Hooks","LSContactBlockedByViewerStatus","LSIntEnum","MWV2OneToOneThreadBlockedContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=a.children,e=a.participants,f=a.thread;a=d("Int64Hooks").useMemoInt64(function(){if(!((i||(i=d("I64"))).equal(f.threadType,(j||(j=d("LSIntEnum"))).ofNumber(1))||(i||(i=d("I64"))).equal(f.threadType,(j||(j=d("LSIntEnum"))).ofNumber(15))))return!1;var a={contents:!1};e.forEach(function(b,e,f){if(!(i||(i=d("I64"))).equal(b[1].blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))){a.contents=!0;return}});return a.contents},[f.threadType,e]);return k.jsx(d("MWV2OneToOneThreadBlockedContext.react").MWV2OneToOneThreadBlockedContext,{blocked:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2SeenHead.react",["GenderConst","I64","LSIntEnum","MWMessageDeliveryStatus","getLSMediaContactProfilePictureUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b,e=a[0];a=a[1];return{gender:c("GenderConst").NOT_A_PERSON,id:(h||(h=d("I64"))).to_string(a.id),imageSrc:c("getLSMediaContactProfilePictureUrl")(a),name:(b=e.nickname)!=null?b:a.name,timestamp:h.to_float(e.readActionTimestampMs)}}function a(a,b){var c={contents:(h||(h=d("I64"))).zero};a.forEach(function(a,e,f){e=a[0];if(!(h||(h=d("I64"))).equal(e.contactId,b)&&(h||(h=d("I64"))).gt(e.deliveredWatermarkTimestampMs,c.contents)){c.contents=e.deliveredWatermarkTimestampMs;return}});return c.contents}function b(a){return new Set([(h||(h=d("I64"))).to_string(a)])}function e(a,b,c,e,f,g){var k=[];b.forEach(function(b,e,f){if(c.has(e)||a.isAdminMessage)return;if(!(h||(h=d("I64"))).equal(a.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;f=b[0];var l=(h||(h=d("I64"))).equal(a.senderId,f.contactId);f=h.le(a.timestampMs,f.readWatermarkTimestampMs);if(l||f){k.push(j(b));if(!g){c.add(e);return}else return}});var l=k.length===0&&c.size===1;if(k.length<=0)if((h||(h=d("I64"))).equal(a.senderId,f))return d("MWMessageDeliveryStatus").getDeliveryStatusForMessageSentByYou(a,e,l);else return{type:"NoneStatus"};if(!g)if(k.length>1)return{heads:k,type:"MultipleSeenHeads"};else return{head:k[0],type:"SingleSeenHead"};f=k.length===b.size-1;return{delivered:f,heads:k,type:"DeliveredAndRead"}}g.calculateMaxDeliveredTimestamp=a;g.makeExistingSeenHeads=b;g.deliveryStatusForMessage=e}),98);
__d("MWPBaseMessageList_DEPRECATED",["BaseHeadingContextWrapper.react","CometHideableComponentExperiment.react","LSMessagingThreadTypeUtil","MWPActor.react","MWPMessageAuthor.react","MWPOneToOneThreadBlockedContext.react","MWV2SeenHead.react","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={backgroundColor:{backgroundColor:"x1eb86dx",$$css:!0}};function a(a){var b=a.children,e=a.messages,f=a.participants,g=a.renderRow;a=a.thread;var h=d("MWPActor.react").useActor(),k=d("MWV2SeenHead.react").calculateMaxDeliveredTimestamp(f,h),l=d("MWV2SeenHead.react").makeExistingSeenHeads(h),m=d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),n=[];for(var o=e.length-1|0;o>=0;--o){var p=o===0?void 0:e[o-1|0],q=o>=(e.length-1|0)?void 0:e[o+1|0],r=e[o],s=d("MWV2SeenHead.react").deliveryStatusForMessage(r,f,l,k,h,m);n.push(i.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_view",disableHiding:!0,xstyle:j.backgroundColor,children:i.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:r.senderId,threadKey:r.threadKey,children:g({message:r,nextMessage:q,prevMessage:p,status:s})})},c("justknobx")._("2310")?r.offlineThreadingId:r.messageId))}if(n.length===0)return null;else return i.jsx(c("BaseHeadingContextWrapper.react"),{children:i.jsx("div",{className:"x1ja2u2z",children:i.jsx(c("MWPOneToOneThreadBlockedContext.react"),{participants:f,thread:a,children:b(n.reverse())})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useThreadLastMessageTimeMs",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(b.tables.messages).getKeyRange(a).map(function(a){return a.timestampMs})},[b,a],f.id+":26")}g["default"]=a}),98);
__d("MAWMessageList_DEPRECATED.react",["BaseTheme.react","CometErrorBoundary.react","CometPageletWithDiv.react","CometScreenReaderText.react","I64","Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWMessageListRow.react","MAWStateContext.react","MWBaseTheme","MWBlockingProtectionContext.react","MWPBaseMessageList_DEPRECATED","MWPMessageListColumn.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWV2MessageRowSimple.react","ReQL","ReQLSuspense","cr:3907","cr:8080","cr:8083","cr:8085","cr:9942","gkx","qex","react","useMWMessageRowTheme","useMWPAriaLabelForMessageListGrid","useReStore","useThreadLastMessageTimeMs","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i,m=l.useEffect,n=l.useId,o=l.useState,p=(l=b("cr:9942"))!=null?l:b("cr:8085"),q=c("qex")._("1477")===!0||c("gkx")("2406"),r=(l=c("qex")._("1387"))!=null?l:!1,s=(j||(j=d("I64"))).of_int32(5e3);function t(a,b){return new Map(d("ReQLSuspense").useArray(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.tables.contacts)).map(function(a){var b=a[0];a=a[1];return[(j||(j=d("I64"))).to_string(a.id),[b,a]]})},[b,a.threadKey],f.id+":99"))}function u(a,b){m(function(){var c;if((a==null?void 0:(c=a.scrollPositionRef.current)==null?void 0:c.type)==="Bottom"&&b.length>0){c=a.scrollerRef.current;c==null?void 0:c.scrollToBottom()}},[b,a])}function a(a){var b=a.scrollerRefs,e=a.theme;e=e===void 0?d("MWBaseTheme").empty:e;var f=a.threadKey;a=a.threadType;var g=d("MWPTypingIndicators.react").useTypingParticipants(f),h=d("MWPTypingIndicators.react").useAccessibilityText(g);u(b,g);if(g.length>0)return k.jsx(c("BaseTheme.react"),{config:e,children:k.jsx(c("MWV2MessageRowSimple.react"),{children:k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:[k.jsx("div",{"aria-live":"polite",children:k.jsx(c("CometScreenReaderText.react"),{text:h})}),k.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{threadKey:f,threadType:a})]})})});else return null}a.displayName=a.name+" [from "+f.id+"]";var v=d("withCometPlaceholder").withCometPlaceholder(a);function e(a){var e,g=a.messageElementRefs,i=a.messages,l=a.scrollerRefs,m=a.thread,u=(h||(h=c("useReStore")))();a=t(m,u);var w=c("useMWPAriaLabelForMessageListGrid")(m),x=c("useMWMessageRowTheme")(),y=o(""),z=y[0],A=y[1],B=n(),C=d("Int64Hooks").useMemoInt64(function(){return m.threadType},[m.threadType]),D=c("useThreadLastMessageTimeMs")(m.threadKey);y=d("ReQLSuspense").useFirst(function(){return r?d("ReQL").fromTableAscending(u.tables.occamadillo_most_recent_message_per_thread).map(function(){return!0}):d("ReQL").empty()},[u],f.id+":200");e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(u.tables.threads,["lastActivityTimestampMs"]).getKeyRange(m.threadKey).map(function(a){a=a.lastActivityTimestampMs;return D!=null?q?(j||(j=d("I64"))).gt((j||(j=d("I64"))).sub(a,D),s):(j||(j=d("I64"))).lt(D,a):!1})},[u.tables.threads,D,m.threadKey],f.id+":210"))!=null?e:!1;var E=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector()),F=b("cr:8083")==null?void 0:b("cr:8083")(m.threadKey);y=b("cr:8080")==null?void 0:b("cr:8080")({hasAnyOccamData:y,isGapUiV2Enabled:r,lastEbMessageTime:F,lastMessageTimeMs:D});E=!E&&e&&(!r||y!=null);return k.jsxs(k.Fragment,{children:[k.jsx(c("MWPBaseMessageList_DEPRECATED"),{messages:i,participants:a,renderRow:function(a){var b=a.message,d=a.nextMessage;a=a.prevMessage;return k.jsx(c("MAWMessageListRow.react"),{domElementRef:g.set(b.messageId),lastEbMessageTime:F,modal:z,row:{message:b,nextMessage:d,prevMessage:a},thread:m})},thread:m,children:function(a){a=k.jsxs(k.Fragment,{children:[a,k.jsx(v,{scrollerRefs:l,theme:x,threadKey:m.threadKey,threadType:C})]});return k.jsx("div",{"data-testid":void 0,id:B,children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWV2MessageList",children:k.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:m,children:k.jsx(c("MWBlockingProtectionContext.react").Provider,{children:k.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:w,modal:z,setModal:A,children:b("cr:3907")==null?a:k.jsx(b("cr:3907"),{id:B,children:a})})})})})})}}),E&&p?k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx("div",{className:"x1eb86dx",children:k.jsx(p,{shadowGapUiMarker:y})})}):null]})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("MWMessageElementRefList",[],(function(a,b,c,d,e,f){"use strict";function a(){var a=new Map(),b=new Map(),c={contents:void 0};return{get:function(b,d){var e=a.get(b);if(e==null){c.contents=[b,d];return}return d(e)},set:function(d){var e=b.get(d);if(e!=null)return e;e=function(b){if(b==null){a["delete"](d);return}a.set(d,b);if(c.contents!=null&&c.contents[0]===d){var e=c.contents;e[0];e=e[1];e(b);c.contents=void 0;return}};b.set(d,e);return e}}}f["default"]=a}),66);
__d("useCheckMessageIntegrityForSecureThread",["Int64Hooks","MAWMessageIntegrityCheckDeferred","MetaConfig","Random","useMWEntrypoint"],(function(a,b,c,d,e,f,g){"use strict";var h=c("MetaConfig")._("59");function a(a,b,e){var f=c("useMWEntrypoint")();return d("Int64Hooks").useCallbackInt64(function(c,g,i,j){if(!d("Random").coinflip(h))return;d("MAWMessageIntegrityCheckDeferred").runMessageIntegrityCheckDeferred(a,b,e,f,i,c,g,j)},[a,b,e,f])}g["default"]=a}),98);
__d("useMWCurrentVisibleMessage",["I64","Int64Hooks","LSFactory","LSMessagePointQueryStoredProcedure","MWMessageElementRefList","MWPVisibleMessageContext.react","ReQL","ReQLSuspense","promiseDone","react","setTimeout","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=b.useCallback,l=b.useEffect,m=b.useRef,n=b.useState;function a(a,b){var e=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),g=e.visibleMessage,j=m(c("MWMessageElementRefList")()),o=a==null?void 0:a.threadKey,p=a==null?void 0:a.threadType,q=m(),r=(h||(h=c("useReStore")))(),s=d("ReQLSuspense").useFirst(function(){if(o==null)return d("ReQL").empty();if(g==null)return d("ReQL").fromTableDescending(r.tables.messages_ranges_v2__generated).getKeyRange(o);var a=g.timestamp;return d("ReQL").fromTableDescending(r.tables.messages_ranges_v2__generated).getKeyRange(o).bounds({lte:[a]}).filter(function(b){var c=b.maxTimestampMs;b=b.minTimestampMs;return(i||(i=d("I64"))).ge(a,b)&&(i||(i=d("I64"))).le(a,c)})},[o,g,r],f.id+":58");e=n(function(){return s});var t=e[0],u=e[1];l(function(){q.current=void 0,g==null&&(b==null?void 0:b.current)!=null&&b.current.scrollToBottom()},[b,g]);var v=k(function(a){var d=b==null?void 0:b.current;if(d!=null){c("setTimeout")(function(){return d.scrollElementIntoViewIfNeeded(a)},0);return}},[b]),w=k(function(a){if(a!==q.current)return j.current.get(a,function(b){v(b),q.current=a})},[v]);l(function(){s!=null?u(s):g==null&&u(function(){})},[g,s,u]);l(function(){g!=null&&t!=null&&g.messageId!=null&&w(g.messageId)},[r,g,t,w]);d("Int64Hooks").useEffectInt64(function(){if(a!=null&&s==null&&g!=null&&g.messageId!=null){var b,e=g.messageId;b=(i||(i=d("I64"))).to_int32((b=p)!=null?b:(i||(i=d("I64"))).neg_one);if(b!==-1&&(b===15||b===16))return;c("promiseDone")(r.runInTransaction(function(b){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(b),{messageId:e,threadKey:a.threadKey,threadType:a.threadType})},"readwrite",void 0,void 0,f.id+":145"))}},[r,g,s,o,p,a]);return{messageElementRefs:j,messageRange:t,visibleMessage:(e=g)!=null?e:void 0}}g["default"]=a}),98);
__d("useMWV2ConversationScrollerRefs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useMemo,j=b.useRef;function a(){var a=j(null),b=j({type:"Bottom"});return i(function(){return{scrollerRef:a,scrollPositionRef:b}},[])}g["default"]=a}),98);